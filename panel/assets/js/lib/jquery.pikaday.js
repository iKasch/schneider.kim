/* Pikaday | Copyright Â© 2013 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday */
(function(e,t,n){"use strict";if(typeof t==="function"&&t.amd){t(function(t){var r="moment";var i=t.defined&&t.defined(r)?t(r):undefined;return n(i||e.moment)})}else{e.Pikaday=n(e.moment)}})(window,window.define,function(e){"use strict";var t=typeof e==="function",n=!!window.addEventListener,r=window.document,i=window.setTimeout,s=function(e,t,r,i){if(n){e.addEventListener(t,r,!!i)}else{e.attachEvent("on"+t,r)}},o=function(e,t,r,i){if(n){e.removeEventListener(t,r,!!i)}else{e.detachEvent("on"+t,r)}},u=function(e,t,n){var i;if(r.createEvent){i=r.createEvent("HTMLEvents");i.initEvent(t,true,false);i=y(i,n);e.dispatchEvent(i)}else if(r.createEventObject){i=r.createEventObject();i=y(i,n);e.fireEvent("on"+t,i)}},a=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},f=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")!==-1},l=function(e,t){if(!f(e,t)){e.className=e.className===""?t:e.className+" "+t}},c=function(e,t){e.className=a((" "+e.className+" ").replace(" "+t+" "," "))},h=function(e){return/Array/.test(Object.prototype.toString.call(e))},p=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},d=function(e){return e%4===0&&e%100!==0||e%400===0},v=function(e,t){return[31,d(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},m=function(e){if(p(e))e.setHours(0,0,0,0)},g=function(e,t){return e.getTime()===t.getTime()},y=function(e,t,n){var r,i;for(r in t){i=e[r]!==undefined;if(i&&typeof t[r]==="object"&&t[r].nodeName===undefined){if(p(t[r])){if(n){e[r]=new Date(t[r].getTime())}}else if(h(t[r])){if(n){e[r]=t[r].slice(0)}}else{e[r]=y({},t[r],n)}}else if(n||!i){e[r]=t[r]}}return e},b={field:null,bound:undefined,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:false,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:undefined,maxMonth:undefined,isRTL:false,numberOfMonths:1,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},onSelect:null,onOpen:null,onClose:null,onDraw:null},w=function(e,t,n){t+=e.firstDay;while(t>=7){t-=7}return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},E=function(e,t,n,r,i){if(i){return'<td class="is-empty"></td>'}var s=[];if(r){s.push("is-disabled")}if(n){s.push("is-today")}if(t){s.push("is-selected")}return'<td data-day="'+e+'" class="'+s.join(" ")+'"><button class="pika-button" type="button">'+e+"</button>"+"</td>"},S=function(e,t){return"<tr>"+(t?e.reverse():e).join("")+"</tr>"},x=function(e){return"<tbody>"+e.join("")+"</tbody>"},T=function(e){var t,n=[];for(t=0;t<7;t++){n.push('<th scope="col"><abbr title="'+w(e,t)+'">'+w(e,t,true)+"</abbr></th>")}return"<thead>"+(e.isRTL?n.reverse():n).join("")+"</thead>"},N=function(e){var t,n,r,i=e._o,s=e._m,o=e._y,u=o===i.minYear,a=o===i.maxYear,f='<div class="pika-title">',l=true,c=true;for(r=[],t=0;t<12;t++){r.push('<option value="'+t+'"'+(t===s?" selected":"")+(u&&t<i.minMonth||a&&t>i.maxMonth?"disabled":"")+">"+i.i18n.months[t]+"</option>")}f+='<div class="pika-label">'+i.i18n.months[s]+'<select class="pika-select pika-select-month">'+r.join("")+"</select></div>";if(h(i.yearRange)){t=i.yearRange[0];n=i.yearRange[1]+1}else{t=o-i.yearRange;n=1+o+i.yearRange}for(r=[];t<n&&t<=i.maxYear;t++){if(t>=i.minYear){r.push('<option value="'+t+'"'+(t===o?" selected":"")+">"+t+"</option>")}}f+='<div class="pika-label">'+o+'<select class="pika-select pika-select-year">'+r.join("")+"</select></div>";if(u&&(s===0||i.minMonth>=s)){l=false}if(a&&(s===11||i.maxMonth<=s)){c=false}f+='<button class="pika-prev'+(l?"":" is-disabled")+'" type="button">'+i.i18n.previousMonth+"</button>";f+='<button class="pika-next'+(c?"":" is-disabled")+'" type="button">'+i.i18n.nextMonth+"</button>";return f+="</div>"},C=function(e,t){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+T(e)+x(t)+"</table>"},k=function(o){var u=this,a=u.config(o);u._onMouseDown=function(e){if(!u._v){return}e=e||window.event;var t=e.target||e.srcElement;if(!t){return}if(!f(t,"is-disabled")){if(f(t,"pika-button")&&!f(t,"is-empty")){u.setDate(new Date(u._y,u._m,parseInt(t.innerHTML,10)));if(a.bound){i(function(){u.hide()},100)}return}else if(f(t,"pika-prev")){u.prevMonth()}else if(f(t,"pika-next")){u.nextMonth()}}if(!f(t,"pika-select")){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false;return false}}else{u._c=true}};u._onChange=function(e){e=e||window.event;var t=e.target||e.srcElement;if(!t){return}if(f(t,"pika-select-month")){u.gotoMonth(t.value)}else if(f(t,"pika-select-year")){u.gotoYear(t.value)}};u._onInputChange=function(n){var r;if(n.firedBy===u){return}if(t){r=e(a.field.value,a.format);r=r&&r.isValid()?r.toDate():null}else{r=new Date(Date.parse(a.field.value))}u.setDate(p(r)?r:null);if(!u._v){u.show()}};u._onInputFocus=function(){u.show()};u._onInputClick=function(){u.show()};u._onInputBlur=function(){if(!u._c){u._b=i(function(){u.hide()},50)}u._c=false};u._onClick=function(e){e=e||window.event;var t=e.target||e.srcElement,r=t;if(!t){return}if(!n&&f(t,"pika-select")){if(!t.onchange){t.setAttribute("onchange","return;");s(t,"change",u._onChange)}}do{if(f(r,"pika-single")){return}}while(r=r.parentNode);if(u._v&&t!==a.field){u.hide()}};u.el=r.createElement("div");u.el.className="pika-single"+(a.isRTL?" is-rtl":"");s(u.el,"mousedown",u._onMouseDown,true);s(u.el,"change",u._onChange);if(a.field){if(a.bound){r.body.appendChild(u.el)}else{a.field.parentNode.insertBefore(u.el,a.field.nextSibling)}s(a.field,"change",u._onInputChange);if(!a.defaultDate){if(t&&a.field.value){a.defaultDate=e(a.field.value,a.format).toDate()}else{a.defaultDate=new Date(Date.parse(a.field.value))}a.setDefaultDate=true}}var l=a.defaultDate;if(p(l)){if(a.setDefaultDate){u.setDate(l,true)}else{u.gotoDate(l)}}else{u.gotoDate(new Date)}if(a.bound){this.hide();u.el.className+=" is-bound";s(a.field,"click",u._onInputClick);s(a.field,"focus",u._onInputFocus);s(a.field,"blur",u._onInputBlur)}else{this.show()}};k.prototype={config:function(e){if(!this._o){this._o=y({},b,true)}var t=y(this._o,e,true);t.isRTL=!!t.isRTL;t.field=t.field&&t.field.nodeName?t.field:null;t.bound=!!(t.bound!==undefined?t.field&&t.bound:t.field);var n=parseInt(t.numberOfMonths,10)||1;t.numberOfMonths=n>4?4:n;if(!p(t.minDate)){t.minDate=false}if(!p(t.maxDate)){t.maxDate=false}if(t.minDate&&t.maxDate&&t.maxDate<t.minDate){t.maxDate=t.minDate=false}if(t.minDate){m(t.minDate);t.minYear=t.minDate.getFullYear();t.minMonth=t.minDate.getMonth()}if(t.maxDate){m(t.maxDate);t.maxYear=t.maxDate.getFullYear();t.maxMonth=t.maxDate.getMonth()}if(h(t.yearRange)){var r=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||r;t.yearRange[1]=parseInt(t.yearRange[1],10)||r}else{t.yearRange=Math.abs(parseInt(t.yearRange,10))||b.yearRange;if(t.yearRange>100){t.yearRange=100}}return t},toString:function(n){return!p(this._d)?"":t?e(this._d).format(n||this._o.format):this._d.toDateString()},getMoment:function(){return t?e(this._d):null},setMoment:function(n){if(t&&e.isMoment(n)){this.setDate(n.toDate())}},getDate:function(){return p(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e){this._d=null;return this.draw()}if(typeof e==="string"){e=new Date(Date.parse(e))}if(!p(e)){return}var n=this._o.minDate,r=this._o.maxDate;if(p(n)&&e<n){e=n}else if(p(r)&&e>r){e=r}this._d=new Date(e.getTime());m(this._d);this.gotoDate(this._d);if(this._o.field){this._o.field.value=this.toString();u(this._o.field,"change",{firedBy:this})}if(!t&&typeof this._o.onSelect==="function"){this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){if(!p(e)){return}this._y=e.getFullYear();this._m=e.getMonth();this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){if(!isNaN(e=parseInt(e,10))){this._m=e<0?0:e>11?11:e;this.draw()}},nextMonth:function(){if(++this._m>11){this._m=0;this._y++}this.draw()},prevMonth:function(){if(--this._m<0){this._m=11;this._y--}this.draw()},gotoYear:function(e){if(!isNaN(e)){this._y=parseInt(e,10);this.draw()}},draw:function(e){if(!this._v&&!e){return}var t=this._o,n=t.minYear,r=t.maxYear,s=t.minMonth,o=t.maxMonth;if(this._y<=n){this._y=n;if(!isNaN(s)&&this._m<s){this._m=s}}if(this._y>=r){this._y=r;if(!isNaN(o)&&this._m>o){this._m=o}}this.el.innerHTML=N(this)+this.render(this._y,this._m);if(t.bound){var u=t.field,a=u.offsetLeft,f=u.offsetTop+u.offsetHeight;while(u=u.offsetParent){a+=u.offsetLeft;f+=u.offsetTop}this.el.style.cssText="position:absolute;left:"+a+"px;top:"+f+"px;";i(function(){t.field.focus()},1)}if(typeof this._o.onDraw==="function"){var l=this;i(function(){l._o.onDraw.call(l)},0)}},render:function(e,t){var n=this._o,r=new Date,i=v(e,t),s=(new Date(e,t,1)).getDay(),o=[],u=[];m(r);if(n.firstDay>0){s-=n.firstDay;if(s<0){s+=7}}var a=i+s,f=a;while(f>7){f-=7}a+=7-f;for(var l=0,c=0;l<a;l++){var h=new Date(e,t,1+(l-s)),d=n.minDate&&h<n.minDate||n.maxDate&&h>n.maxDate,y=p(this._d)?g(h,this._d):false,b=g(h,r),w=l<s||l>=i+s;u.push(E(1+(l-s),y,b,d,w));if(++c===7){o.push(S(u,n.isRTL));u=[];c=0}}return C(n,o)},isVisible:function(){return this._v},show:function(){if(!this._v){if(this._o.bound){s(r,"click",this._onClick)}c(this.el,"is-hidden");this._v=true;this.draw();if(typeof this._o.onOpen==="function"){this._o.onOpen.call(this)}}},hide:function(){var e=this._v;if(e!==false){if(this._o.bound){o(r,"click",this._onClick)}this.el.style.cssText="";l(this.el,"is-hidden");this._v=false;if(e!==undefined&&typeof this._o.onClose==="function"){this._o.onClose.call(this)}}},destroy:function(){this.hide();o(this.el,"mousedown",this._onMouseDown,true);o(this.el,"change",this._onChange);if(this._o.field){o(this._o.field,"change",this._onInputChange);if(this._o.bound){o(this._o.field,"click",this._onInputClick);o(this._o.field,"focus",this._onInputFocus);o(this._o.field,"blur",this._onInputBlur)}}if(this.el.parentNode){this.el.parentNode.removeChild(this.el)}}};return k});(function(e,t,n){"use strict";if(typeof t==="function"&&t.amd){t(["jquery","pikaday"],n)}else{n(e.jQuery,e.Pikaday)}})(window,window.define,function(e,t){"use strict";e.fn.pikaday=function(){var n=arguments;if(!n||!n.length){n=[{}]}return this.each(function(){var r=e(this),i=r.data("pikaday");if(!(i instanceof t)){if(typeof n[0]==="object"){var s=e.extend({},n[0]);s.field=r[0];r.data("pikaday",new t(s))}}else{if(typeof n[0]==="string"&&typeof i[n[0]]==="function"){i[n[0]].apply(i,Array.prototype.slice.call(n,1))}}})}});